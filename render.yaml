# Render.com Blueprint for SilverCare Full Stack Deployment
# Advanced Feature C & D: Cloud Deployment with Docker orchestration

services:
  # Spring Boot REST API (B2B Service)
  - type: web
    name: silvercare-api
    env: docker
    region: singapore
    plan: free
    dockerfilePath: silvercare-api/Dockerfile
    dockerContext: ./silvercare-api
    envVars:
      - key: DB_URL
        sync: false  # Provide your Neon URL (e.g. postgresql://...)
      - key: DB_USER
        sync: false
      - key: DB_PASSWORD
        sync: false
      - key: STRIPE_SECRET_KEY
        sync: false
      - key: STRIPE_PUBLISHABLE_KEY
        sync: false
    healthCheckPath: /s-api/status

  # Tomcat Web Application (Main Website - MVC)
  - type: web
    name: silvercare-web
    env: docker
    region: singapore
    plan: free
    dockerfilePath: silvercare-web/Dockerfile
    dockerContext: ./silvercare-web
    envVars:
      - key: DB_URL
        sync: false
      - key: DB_USER
        sync: false
      - key: DB_PASSWORD
        sync: false
      - key: STRIPE_PUBLISHABLE_KEY
        sync: false
      - key: API_BASE_URL
        sync: false # Set it to your silvercare-api Render URL (e.g. https://...onrender.com/s-api)
    healthCheckPath: /
